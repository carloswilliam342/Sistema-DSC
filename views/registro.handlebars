<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
    }
    .registro-container {
      height: 100vh;
      display: flex;
      align-items: center;
    }
    .image-container {
      position: relative;
      flex: 50%;
      height: 100vh;
      overflow: hidden;
      padding: 20px;
    }
    .image-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 20px;
    }
    .text-overlay {
      position: absolute;
      bottom: 10%;
      left: 10%;
      color: white;
      font-size: 1.5rem;
      font-weight: bold;
      width: 80%;
      text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
    }
    .text-overlay p {
      font-size: 1rem;
      font-weight: normal;
      margin-top: 10px;
    }
    .form-container {
      flex: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .card {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      max-width: 400px;
      width: 100%;
      text-align: center;
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }
    .tabs button {
      background-color: #E3F7F6;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      font-weight: bold;
      cursor: pointer;
      margin: 0 5px;
    }
    .tabs button.active {
      background-color: #3CBEC4;
      color: white;
    }
    input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 20px;
      font-size: 16px;
    }
    .password-container {
      position: relative;
      display: flex;
      align-items: center;
    }
    .password-container input {
      padding-right: 40px;
    }
    .password-container img {
      position: absolute;
      right: 15px;
      cursor: pointer;
      width: 20px;
    }
    button[type="submit"] {
      background-color: #3CBEC4;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 20px;
      width: 100%;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }
    p {
      margin-top: 15px;
      font-size: 14px;
    }
    p a {
      color: #3CBEC4;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <div class="container-fluid">
    <div class="row registro-container">

      <!-- Coluna da Imagem (50%) -->
      <div class="col-md-6 image-container">
        <img src="images/imagem-registro.png" alt="Imagem de Registro">
        <div class="text-overlay">
          <h2>Junte-se a uma comunidade de pesquisadores que transformam dados qualitativos em representações coletivas</h2>
          <p>Crie sua conta para acessar recursos, ferramentas e tutoriais sobre o DSC</p>
        </div>
      </div>

      <!-- Coluna do Formulário de Registro (50%) -->
      <div class="col-md-6 form-container">
        <div class="card">
          <div class="tabs">
            <button class="active">Registre-se</button>
            <button onclick="window.location.href='/login'">Login</button>
          </div>

          <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>

          {{#if error_msg}}
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {{error_msg}}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          {{/if}}

          {{#if success_msg}}
          <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{success_msg}}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          {{/if}}

          <form action="/registro" method="POST" enctype="multipart/form-data">
            <label for="email">Endereço de e-mail</label>
            <input type="email" id="email" name="email" placeholder="Digite seu endereço de e-mail" required>

            <label for="nome">Nome de usuário</label>
            <input type="text" id="nome" name="nome" placeholder="Digite seu nome de usuário" required>

            <label for="senha">Senha</label>
            <div class="password-container">
              <input type="password" id="senha" name="senha" placeholder="Digite sua senha" required>
              <img src="images/eye-icon.png" alt="Mostrar senha" onclick="togglePassword()">
            </div>
            <div id="senha-feedback" class="mt-2"></div>

            <label for="tipoUsuario">Tipo de Usuário</label>
            <select id="tipoUsuario" name="tipoUsuario" required>
              <option value="ESTUDANTE">Estudante</option>
              <option value="PESQUISADOR">Pesquisador</option>
            </select>
            <div class="p-2"></div>
            <label for="imagem">Foto de perfil</label>
              <input 
                type="file" 
                id="imagem" 
                name="imagem" 
                accept="image/*"
                required
                style="
                  border: 1px solid #ddd;
                  padding: 8px;
                  border-radius: 20px;
                  margin: 10px 0;
                "
            >

            <button type="submit">Registrar</button>
          </form>

          <p>Já tem uma conta? <a href="/login">Faça login</a></p>
        </div>
      </div>

    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/zxcvbn@4.4.2/dist/zxcvbn.js"></script>

 <script>
    function togglePassword() {
      var senha = document.getElementById("senha");
      if (senha.type === "password") {
        senha.type = "text";
      } else {
        senha.type = "password";
      }
    }
</script>
<script>
const scoreLabels = [
    "Muito fraca",
    "Fraca",
    "Razoável",
    "Forte",
    "Muito forte"
];

// Tradução das sugestões mais comuns do zxcvbn
function traduzirSugestoes(sugestoes) {
    if (!sugestoes || !sugestoes.length) return "";
    return sugestoes.map(s => {
        return s
            .replace("Use a few words, avoid common phrases", "Use algumas palavras, evite frases comuns")
            .replace("No need for symbols, digits, or uppercase letters", "Não é necessário símbolos, números ou letras maiúsculas")
            .replace("Add another word or two. Uncommon words are better.", "Adicione mais uma ou duas palavras. Palavras incomuns são melhores.")
            .replace("Straight rows of keys are easy to guess", "Sequências de teclas são fáceis de adivinhar")
            .replace("Short keyboard patterns are easy to guess", "Padrões curtos de teclado são fáceis de adivinhar")
            .replace("Use a longer keyboard pattern with more turns", "Use um padrão de teclado mais longo e com mais variações")
            .replace("Repeats like \"aaa\" are easy to guess", "Repetições como \"aaa\" são fáceis de adivinhar")
            .replace("Repeats like \"abcabcabc\" are only slightly harder to guess than \"abc\"", "Repetições como \"abcabcabc\" são só um pouco mais difíceis de adivinhar que \"abc\"")
            .replace("Avoid sequences", "Evite sequências")
            .replace("Avoid recent years", "Evite anos recentes")
            .replace("Avoid years that are associated with you", "Evite anos que estejam associados a você")
            .replace("Avoid dates and years that are associated with you", "Evite datas e anos que estejam associados a você")
            .replace("Avoid commonly used passwords", "Evite senhas comuns")
            .replace("This is a top-10 common password", "Esta é uma das 10 senhas mais comuns")
            .replace("This is a top-100 common password", "Esta é uma das 100 senhas mais comuns")
            .replace("This is a very common password", "Esta é uma senha muito comum")
            .replace("This is similar to a commonly used password", "Esta senha é parecida com uma senha comum")
            .replace("A word by itself is easy to guess", "Uma palavra sozinha é fácil de adivinhar")
            .replace("Names and surnames by themselves are easy to guess", "Nomes e sobrenomes sozinhos são fáceis de adivinhar");
    }).join("<br>");
}

document.getElementById('senha').addEventListener('input', function(e) {
    const senha = e.target.value;
    const feedbackDiv = document.getElementById('senha-feedback');
    const result = zxcvbn(senha);

    let msg = scoreLabels[result.score];
    let sugestoes = traduzirSugestoes(result.feedback.suggestions);

    feedbackDiv.innerHTML = `
        <strong>Força da senha:</strong> ${msg}<br>
        ${sugestoes}
    `;
    feedbackDiv.style.color = result.score >= 3 ? 'green' : 'red';
});
</script>
</body>
</html>
